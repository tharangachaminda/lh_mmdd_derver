<div class="type-selection-container" role="main">
  <!-- Header Section -->
  <div class="header">
    <h2>{{ title }}</h2>
    <p class="subtitle">{{ subtitle }}</p>
    <p class="context" *ngIf="selectedCategory">
      <mat-icon class="category-icon" aria-hidden="true">category</mat-icon>
      <span>{{ selectedCategory }}</span>
    </p>
  </div>

  <!-- Question Types Grid -->
  <div class="types-grid" *ngIf="questionTypes.length > 0" role="list">
    <mat-chip-set aria-label="Select question types" class="chip-set">
      <mat-chip
        *ngFor="let type of questionTypes"
        class="type-chip"
        [class.selected]="isTypeSelected(type.dbType)"
        (click)="toggleTypeSelection(type.dbType)"
        (keydown.enter)="toggleTypeSelection(type.dbType)"
        (keydown.space)="toggleTypeSelection(type.dbType); $event.preventDefault()"
        tabindex="0"
        role="listitem"
        [attr.aria-label]="'Select ' + type.displayName + ' question type'"
        [attr.aria-pressed]="isTypeSelected(type.dbType)"
      >
        <mat-icon *ngIf="isTypeSelected(type.dbType)" class="check-icon">check_circle</mat-icon>
        {{ type.displayName }}
      </mat-chip>
    </mat-chip-set>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="questionTypes.length === 0" role="status">
    <mat-icon class="empty-icon">quiz</mat-icon>
    <p>No question types available for this category.</p>
  </div>

  <!-- Proceed Button -->
  <div class="actions">
    <button
      mat-raised-button
      color="primary"
      class="proceed-button"
      [disabled]="selectedTypes.length === 0"
      (click)="proceedToPersonaForm()"
      [attr.aria-label]="'Proceed with ' + selectedTypes.length + ' selected types'"
    >
      <mat-icon>arrow_forward</mat-icon>
      Proceed ({{ selectedTypes.length }} selected)
    </button>
  </div>
</div>
